name: Mantener activa Fly (17:00â€“20:00 CL)

on:
  schedule:
    - cron: "*/2 21-23 * * *"  # Invierno CL (UTC-4): 17â€“19 = 21â€“23 UTC
    - cron: "*/2 20-22 * * *"  # Verano  CL (UTC-3): 17â€“19 = 20â€“22 UTC
  workflow_dispatch: {}

jobs:
  ping:
    runs-on: ubuntu-latest
    env:
      APP: crossfit-reservas-mvp
    steps:
      - name: Hacer ping a la app con log
        run: |
          export TZ=America/Santiago
          echo "ğŸ•’ Hora CL: $(date '+%Y-%m-%d %H:%M:%S')"
          echo "ğŸŒ Ping https://$APP.fly.dev/health"
          HTTP_CODE=$(curl -o /dev/null -s -w "%{http_code}" "https://$APP.fly.dev/health")
          echo "ğŸ“¡ CÃ³digo HTTP: $HTTP_CODE"